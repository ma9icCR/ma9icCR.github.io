<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>CISP-PTE培训简记 | Ma9icCR</title><meta name="description" content="渗透测试过程环节 前期交互 情报收集 威胁建模 在收集到充分的信息进行威胁建模与攻击策划，职责划分，确定出最可行的攻击通道   漏洞分析 找出可以实施渗透攻击的点，或者针对系统与服务进行安全漏洞探测与挖掘   渗透攻击 后渗透攻击 寻找客户组织最具价值和尝试安全保护的信息和资产，最终达成能够对客户组织造成最重要业务影响的攻击途径   报告 渗透测试的过程详细描述，以及修补与升级技术方案    信息"><meta name="keywords" content="CISP-PTE,web"><meta name="author" content="Ma9icCR"><meta name="copyright" content="Ma9icCR"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://ma9iccr.github.io/2023-12/CISP-PTE%E5%9F%B9%E8%AE%AD%E7%AE%80%E8%AE%B0/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="CISP-PTE培训简记"><meta property="og:url" content="https://ma9iccr.github.io/2023-12/CISP-PTE%E5%9F%B9%E8%AE%AD%E7%AE%80%E8%AE%B0/"><meta property="og:site_name" content="Ma9icCR"><meta property="og:description" content="渗透测试过程环节 前期交互 情报收集 威胁建模 在收集到充分的信息进行威胁建模与攻击策划，职责划分，确定出最可行的攻击通道   漏洞分析 找出可以实施渗透攻击的点，或者针对系统与服务进行安全漏洞探测与挖掘   渗透攻击 后渗透攻击 寻找客户组织最具价值和尝试安全保护的信息和资产，最终达成能够对客户组织造成最重要业务影响的攻击途径   报告 渗透测试的过程详细描述，以及修补与升级技术方案    信息"><meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><meta property="article:published_time" content="2023-12-15T16:00:00.000Z"><meta property="article:modified_time" content="2023-12-18T15:56:20.940Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="prev" title="CISP-PTE培训XSS小练" href="https://ma9iccr.github.io/2023-12/CISP-PTE%E5%9F%B9%E8%AE%ADXSS%E5%B0%8F%E7%BB%83/"><link rel="next" title="阅读简记" href="https://ma9iccr.github.io/2023-05/%E9%98%85%E8%AF%BB%E7%AE%80%E8%AE%B0/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2023-12-18 23:56:20'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://ma9ic-image.obs.cn-north-4.myhuaweicloud.com/images/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">36</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">14</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">11</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page" href="/images/"><i class="fa-fw fas fa-image"></i><span> Image</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/navigate/"><i class="fa-fw fas fa-navigate"></i><span> Navigate</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#渗透测试过程环节"><span class="toc-number">1.</span> <span class="toc-text">渗透测试过程环节</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#信息收集"><span class="toc-number">2.</span> <span class="toc-text">信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#信息收集的作用"><span class="toc-number">2.1.</span> <span class="toc-text">信息收集的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#信息收集的内容"><span class="toc-number">2.2.</span> <span class="toc-text">信息收集的内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#信息收集的方法"><span class="toc-number">2.3.</span> <span class="toc-text">信息收集的方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#漏洞扫描"><span class="toc-number">3.</span> <span class="toc-text">漏洞扫描</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#主动信息收集"><span class="toc-number">3.1.</span> <span class="toc-text">主动信息收集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#网络扫描"><span class="toc-number">3.2.</span> <span class="toc-text">网络扫描</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#网络扫描的特点"><span class="toc-number">3.2.1.</span> <span class="toc-text">网络扫描的特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#网络扫描获取的信息"><span class="toc-number">3.2.2.</span> <span class="toc-text">网络扫描获取的信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#预备代理（扫描之前要使用代理）"><span class="toc-number">3.2.3.</span> <span class="toc-text">预备代理（扫描之前要使用代理）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#代理服务器"><span class="toc-number">3.3.</span> <span class="toc-text">代理服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#代理服务器的功能"><span class="toc-number">3.3.1.</span> <span class="toc-text">代理服务器的功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#攻击者通过使用代理服务器可以"><span class="toc-number">3.3.2.</span> <span class="toc-text">攻击者通过使用代理服务器可以</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#主机信息扫描"><span class="toc-number">3.4.</span> <span class="toc-text">主机信息扫描</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#判断存活主机"><span class="toc-number">3.4.1.</span> <span class="toc-text">判断存活主机</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#端口扫描"><span class="toc-number">3.5.</span> <span class="toc-text">端口扫描</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#端口和服务"><span class="toc-number">3.5.1.</span> <span class="toc-text">端口和服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#端口分类"><span class="toc-number">3.5.2.</span> <span class="toc-text">端口分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#端口扫描原理"><span class="toc-number">3.5.3.</span> <span class="toc-text">端口扫描原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NMAP"><span class="toc-number">3.5.4.</span> <span class="toc-text">NMAP</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#功能"><span class="toc-number">3.5.4.1.</span> <span class="toc-text">功能</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#典型作用"><span class="toc-number">3.5.4.2.</span> <span class="toc-text">典型作用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#服务扫描"><span class="toc-number">3.6.</span> <span class="toc-text">服务扫描</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#功能-1"><span class="toc-number">3.6.0.1.</span> <span class="toc-text">功能</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#服务扫描的内容："><span class="toc-number">3.6.0.2.</span> <span class="toc-text">服务扫描的内容：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#标识符提取"><span class="toc-number">3.6.0.3.</span> <span class="toc-text">标识符提取</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#操作系统识别"><span class="toc-number">3.6.0.4.</span> <span class="toc-text">操作系统识别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#服务类型探测"><span class="toc-number">3.6.0.5.</span> <span class="toc-text">服务类型探测</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#漏洞扫描-1"><span class="toc-number">3.7.</span> <span class="toc-text">漏洞扫描</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#基本原理"><span class="toc-number">3.7.0.1.</span> <span class="toc-text">基本原理</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Ma9icCR</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page" href="/images/"><i class="fa-fw fas fa-image"></i><span> Image</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/navigate/"><i class="fa-fw fas fa-navigate"></i><span> Navigate</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">CISP-PTE培训简记</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2023-12-16 00:00:00"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2023-12-16</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2023-12-18 23:56:20"><i class="fas fa-history fa-fw"></i> 更新于 2023-12-18</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/CISP-PTE/">CISP-PTE</a><i class="fas fa-angle-right post-meta__separator"></i><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/CISP-PTE/web/">web</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h2 id="渗透测试过程环节"><a href="#渗透测试过程环节" class="headerlink" title="渗透测试过程环节"></a>渗透测试过程环节</h2><ul>
<li>前期交互</li>
<li>情报收集</li>
<li>威胁建模<ul>
<li>在收集到充分的信息进行威胁建模与攻击策划，职责划分，确定出最可行的攻击通道</li>
</ul>
</li>
<li>漏洞分析<ul>
<li>找出可以实施渗透攻击的点，或者针对系统与服务进行安全漏洞探测与挖掘</li>
</ul>
</li>
<li>渗透攻击</li>
<li>后渗透攻击<ul>
<li>寻找客户组织最具价值和尝试安全保护的信息和资产，最终达成能够对客户组织造成最重要业务影响的攻击途径</li>
</ul>
</li>
<li>报告<ul>
<li>渗透测试的过程详细描述，以及修补与升级技术方案</li>
</ul>
</li>
</ul>
<h2 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h2><h3 id="信息收集的作用"><a href="#信息收集的作用" class="headerlink" title="信息收集的作用"></a>信息收集的作用</h3><p>黑客为了更加有效地实施攻击而在攻击前或攻击过程中对目标的所有探测活动。</p>
<ul>
<li>了解安全架构<ul>
<li>信息收集使攻击者能够了解组织完整的安全架构</li>
</ul>
</li>
<li>缩小攻击范围<ul>
<li>通过IP地址范围、网络、域名、远程访问点等信息，可以缩小攻击范围</li>
</ul>
</li>
<li>建立信息数据库<ul>
<li>攻击者能够建立他们自己的相关目标组织安全性弱点的信息数据库来采取下一步的入侵行动</li>
</ul>
</li>
<li>描绘网络拓扑<ul>
<li>攻击者可以描绘出目标组织的网络拓扑图，分析最容易进入的攻击路径</li>
</ul>
</li>
</ul>
<h3 id="信息收集的内容"><a href="#信息收集的内容" class="headerlink" title="信息收集的内容"></a>信息收集的内容</h3><ul>
<li>网络信息</li>
<li>系统信息<ul>
<li>用户和用户组名，系统表示banner，路由表，SNMP信息，系统架构，远程系统类型，系统用户名，密码等</li>
</ul>
</li>
<li>组织信息</li>
</ul>
<h3 id="信息收集的方法"><a href="#信息收集的方法" class="headerlink" title="信息收集的方法"></a>信息收集的方法</h3><ul>
<li><p>GoogleHacking；搜索引擎信息收集</p>
<ul>
<li>site；info；filetype；link；inurl；intext；cache；intitle</li>
</ul>
</li>
<li><p>网站信息收集：目标的网站包含的信息使攻击者能够绘制出网站架构的详细框架</p>
<ul>
<li><p>HTML源代码</p>
</li>
<li><p>cookies</p>
</li>
<li><p>站长工具</p>
</li>
<li><p>邮件信息</p>
</li>
<li><p>shodan搜索引擎：是一个用于帮助发现主要的互联网系统漏洞（包括路由器，交换机，工控系统等）的搜索引擎。它在圈子里就像google一样出名。它主要拦截从服务器到客户端的元数据来工作，目前提供超过50个端口的相关搜索。</p>
<ul>
<li>Google的爬虫/蜘蛛抓取网页数据并为网页内容创建索引。Shodan主要寻找端口并抓取拦截到的信息，然后为它们建立索引，最后显示结果。Shodan并不像google那样为网页内容建立索引，因此它是一个基于拦截器的搜索引擎。</li>
</ul>
</li>
</ul>
</li>
<li><p>whois信息收集：是用来查询域名的IP以及所有者等信息的传输协议。</p>
<ul>
<li>whois通常使用TCP协议43端口。每个域名/IP的whois信息由对应的管理机构保存。</li>
<li>whois可以获取的信息：域名详细信息域名所有者的联系方式域名服务器网络IP地址范围域名创建时间过期记录最近更新记录</li>
<li>通过whois可以：绘制组织详细的网络拓扑图收集可以用来进行社会工程学的个人信息收集其他内网信息</li>
</ul>
</li>
<li><p>DNS常用资源记录类型</p>
<ul>
<li>A 地址此记录列出特定主机名的IP地址。这是名称解析的重要记录。</li>
<li>CNAME 标准名称此记录指定标准主机名的别名。</li>
<li>MX 邮件交换器此记录列出了负责接收发到域中的电子邮件的主机。</li>
<li>NS 记录：名称服务器此记录指定负责给定区域的名称服务器。</li>
<li>PTR 记录：将IP地址映射到主机名</li>
<li>4A 记录：将域名映射成IPv6地址</li>
</ul>
</li>
<li><p>网络信息收集-确定网络地址范围</p>
<ul>
<li>国内工具：CNNIC：关注两个重点：网段和status</li>
<li>netcraft确定网站操作系统<a href="http://www.netcraft.com" target="_blank" rel="noopener">www.netcraft.com</a></li>
</ul>
</li>
<li><p>社会工程学信息收集</p>
</li>
<li><p>指纹识别</p>
<ul>
<li>只有正确识别出WEB容器或网站CMS，才能查找与其相关的漏洞</li>
<li>CMS：内容管理系统或者叫整站系统或者叫文章系统。wappalyzer指纹识别插件</li>
</ul>
</li>
<li><p>查找WEB站点的真实IP</p>
<ul>
<li>真正的目标WEB服务器：实际数据交互时还得找它。</li>
<li>CDN服务器：缓存静态的数据资源</li>
<li>判断目标是否使用了CDN云加速；如果目标服务器没使用CDN，<a href="http://www.ip138.com通常会通过PING目标主域，观察域名的解析情况；还可以利用在线网站https://www.17ce.com" target="_blank" rel="noopener">www.ip138.com通常会通过PING目标主域，观察域名的解析情况；还可以利用在线网站https://www.17ce.com</a></li>
<li>绕过CDN寻找真实IP常规的方法：内部邮箱源；扫描网站测试文件；分站域名；国外访问：<a href="https://asm.ca.com/en/ping.php；查询域名的解析记录www.netcraft.com如果目标网站有自己的APP，可以尝试利用Fiddler或者Burp抓取APP的请求，从里边找到目标的真实IP" target="_blank" rel="noopener">https://asm.ca.com/en/ping.php；查询域名的解析记录www.netcraft.com如果目标网站有自己的APP，可以尝试利用Fiddler或者Burp抓取APP的请求，从里边找到目标的真实IP</a></li>
<li>微步情报社区</li>
<li>censys</li>
</ul>
</li>
</ul>
<h2 id="漏洞扫描"><a href="#漏洞扫描" class="headerlink" title="漏洞扫描"></a>漏洞扫描</h2><h3 id="主动信息收集"><a href="#主动信息收集" class="headerlink" title="主动信息收集"></a>主动信息收集</h3><p>主动信息收集：主动收集会与目标系统有直接的交互，从而得到目标系统相关的一些情报信息。例如：主机开发的端口、服务、站点的目录结构等等。</p>
<ul>
<li><p>主动收集的内容：枚举的内容：</p>
<ul>
<li><p>Netbios 小型局域网协议</p>
</li>
<li><p>Snmp 网络管理协议</p>
</li>
<li><p>Ldap 目录访问协议</p>
</li>
<li><p>Ntp 网络时间协议</p>
</li>
<li><p>Smtp 邮件服务协议</p>
</li>
<li><p>Dns 域名解析协议</p>
</li>
</ul>
</li>
</ul>
<h3 id="网络扫描"><a href="#网络扫描" class="headerlink" title="网络扫描"></a>网络扫描</h3><p><strong>网络扫描</strong>：根据对方服务所采用的协议，在一定时间内，通过自身系统对对方协议进行特定读取、猜想验证、恶意破坏，并将对方直接或间接的返回数据作为某指标的判断依据的一种行为。</p>
<p>网络安全扫描通过探测端口、服务、版本和这些服务及软件安全漏洞。</p>
<p>网络安全扫描技术也是采用积极的、非破坏性的办法来检验系统是否有可能被攻击崩溃。利用一系列的脚本模拟对系统进行攻击的行为，并对结果进行分析。</p>
<p>这种技术通常被用来进行模拟攻击实验和安全审计。</p>
<p>网络安全扫描技术与防火墙、安全监控系统互相配合就能够为网络提供很高的安全性。</p>
<h4 id="网络扫描的特点"><a href="#网络扫描的特点" class="headerlink" title="网络扫描的特点"></a>网络扫描的特点</h4><ul>
<li>一方行为•网络扫描几乎全部是客户端一方的程序，所针对的对象绝大多数是服务器</li>
<li>主动行为•网络扫描器的扫描行为都是在或希望在服务器不知情的情况下偷偷进行，通常在扫描器的设计中，扫描行为应尽可能地避免被服务器察觉</li>
<li>时限性•该时限虽然没有一个明确的界限，但一般来说都是接近扫描的最快速度。如果某个用户每隔几个小时访问一下公司的网站主页，则不能算是扫描</li>
<li>工具进行•因为操作系统提供的程序并不都具有扫描的各项要求</li>
<li>目的性•对预先的猜想进行验证或采集一些关心的数据</li>
</ul>
<h4 id="网络扫描获取的信息"><a href="#网络扫描获取的信息" class="headerlink" title="网络扫描获取的信息"></a>网络扫描获取的信息</h4><ul>
<li>发现存活主机，IP地址，以及存活主机开放的端口</li>
<li>发现主机操作系统类型和系统结构。</li>
<li>发现主机开启的服务类型</li>
<li>发现主机存在的漏洞</li>
</ul>
<h4 id="预备代理（扫描之前要使用代理）"><a href="#预备代理（扫描之前要使用代理）" class="headerlink" title="预备代理（扫描之前要使用代理）"></a>预备代理（扫描之前要使用代理）</h4><p><strong>主动信息收集</strong></p>
<ul>
<li>直接与目标系统交互通信</li>
<li>⽆法避免留下访问的痕迹</li>
<li>所以要做好被封杀的准备</li>
</ul>
<h3 id="代理服务器"><a href="#代理服务器" class="headerlink" title="代理服务器"></a>代理服务器</h3><p>英文全称是（Proxy Server），其功能就是代理网络用户去取得网络信息。</p>
<h4 id="代理服务器的功能"><a href="#代理服务器的功能" class="headerlink" title="代理服务器的功能"></a>代理服务器的功能</h4><ul>
<li>突破自身IP访问限制，访问国外站点，教育网、google等</li>
<li>访问单位或团体内部资源，使用教育网内地址段免费代理服务器，就可以用于对教育网开放的各类FTP下载上传，以及各类资料查询共享</li>
<li>突破中国电信的IP封锁：中国电信用户有很多网站是被限制访问的，这种限制是人为的，不同Serve对地址的封锁是不同的。</li>
<li>提高访问速度：通常代理服务器都设置一个较大的硬盘缓冲区，当有外界的信息通过时，同时也将其保存到缓冲区中，当其他用户再访问相同的信息时，则直接由缓冲区中取出信息，传给用户，以提高访问速度。</li>
<li>隐藏真实IP：上网者也可以通过这种方法隐藏自己的IP，免受攻击。</li>
</ul>
<h4 id="攻击者通过使用代理服务器可以"><a href="#攻击者通过使用代理服务器可以" class="headerlink" title="攻击者通过使用代理服务器可以"></a>攻击者通过使用代理服务器可以</h4><ul>
<li>隐藏源地址，所以攻击可以在无任何法律论据的情况下入侵；</li>
<li>通过冒充一个代理的源地址来掩盖实际的攻击地址；</li>
<li>远程访问内网和其他通常禁止访问的网页资源；</li>
<li>拦截所有攻击者发送的请求并将其它们转换为第三个目标，因此受害者将只能识别代理服务器地址；</li>
<li>攻击者将多个代理服务器链接起来以避免被探测到。</li>
</ul>
<h3 id="主机信息扫描"><a href="#主机信息扫描" class="headerlink" title="主机信息扫描"></a>主机信息扫描</h3><h4 id="判断存活主机"><a href="#判断存活主机" class="headerlink" title="判断存活主机"></a>判断存活主机</h4><p>ping：Ping发送一个ICMP(Internet Control Messages Protocol；因特网信报控制协议）回声请求消息给目的地并报告是否收到所希望的ICMP回声应答。</p>
<p>原理：利用网络上机器IP地址的唯一性，给目标IP地址发送一个数据包，再要求对方返回一个同样大小的数据包来确定两台网络机器是否连接相通，时延是多少。</p>
<h3 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a>端口扫描</h3><h4 id="端口和服务"><a href="#端口和服务" class="headerlink" title="端口和服务"></a>端口和服务</h4><p>“服务”是指某主机按预先定义的协议和一些国际标准、行业标准，向其他主机提供某种数据的支持，并且称服务提供者为“服务器”（Server），称服务请求者为“客户端”（Client）。</p>
<p>端口是传输层协议为了识别同一主机上不同应用程序进程而引入的一个概念。端口由应用程序申请，操作系统同一管理和分配。</p>
<ul>
<li>端口与服务：<ul>
<li>一台主机可以安装多个服务，这些服务可以是相同的服务，也可以是不同的服务。为了区分这些服务，引入“端口”（Port）这个概念，即每一个服务对应于一个或多个端口。端口具有独占性，一旦有服务占用了某个端口，则通常情况下，另外的服务不能再占用这个端口。</li>
</ul>
</li>
</ul>
<h4 id="端口分类"><a href="#端口分类" class="headerlink" title="端口分类"></a>端口分类</h4><ul>
<li>公认端口：0～1023的端口是公认的、知名的端口；0～255之间的端口由因特网名称与数字地址分配机构（ICANN）管理</li>
<li>注册端口：注册端口主要用于服务器对外提供服务，端口范围：1024～ 49151</li>
<li>动态/私有端口：用于分配给用户编写的客户端应用程序；端口范围：49152～ 65535</li>
</ul>
<h4 id="端口扫描原理"><a href="#端口扫描原理" class="headerlink" title="端口扫描原理"></a>端口扫描原理</h4><ul>
<li>端口扫描是向目标主机的TCP或UDP端口发送探测数据包，随后记录目标主机的响应。通过分析目标主机的响应来判断服务端口是打开还是关闭，据此推测目标主机端口提供的服务或信息。</li>
</ul>
<p>TCP客户端：对端口建立连接，记录远端服务器应答，查询记录获取目标服务器所安装的服务名称。</p>
<p>UDP客户端：对端口建立连接，记录远端服务器应答，查询记录获取目标服务器所安装的服务名称。</p>
<h4 id="NMAP"><a href="#NMAP" class="headerlink" title="NMAP"></a>NMAP</h4><h5 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h5><ul>
<li><p><strong>主机探测</strong>：探测网络上的主机，例如列出响应TCP和ICMP请求、icmp请求、开放特别端口的主机。</p>
</li>
<li><p><strong>端口扫描</strong>：探测目标主机所开放的端口。</p>
</li>
<li><p><strong>版本检测</strong>：探测目标主机的网络服务，判断其服务名称及版本号。</p>
</li>
<li><p><strong>系统检测</strong>：探测目标主机的操作系统及网络设备的硬件特性。</p>
</li>
<li><p><strong>支持探测脚本的编写</strong>：使用Nmap的脚本引擎（NSE）和Lua编程语言。</p>
</li>
</ul>
<h5 id="典型作用"><a href="#典型作用" class="headerlink" title="典型作用"></a>典型作用</h5><ul>
<li>通过对设备或者防火墙的探测来审计它的安全性。</li>
<li>探测目标主机所开放的端口。</li>
<li>网络存储，网络映射，维护和资产管理。（这个有待深入）</li>
<li>通过识别新的服务器审计网络的安全性。</li>
<li>探测网络上的主机。</li>
</ul>
<h3 id="服务扫描"><a href="#服务扫描" class="headerlink" title="服务扫描"></a>服务扫描</h3><h5 id="功能-1"><a href="#功能-1" class="headerlink" title="功能"></a>功能</h5><ul>
<li>探查活跃主机的系统及开放网络服务的类型</li>
<li>目标主机上运行着何种类型什么版本的操作系统</li>
<li>各个开放端口上监听的是哪些网络服务阶段，在开放端口后面是什么服务</li>
</ul>
<h5 id="服务扫描的内容："><a href="#服务扫描的内容：" class="headerlink" title="服务扫描的内容："></a>服务扫描的内容：</h5><ul>
<li>标识符抓取</li>
<li>操作系统识别</li>
<li>服务类型识别</li>
<li>绘制网络拓扑</li>
</ul>
<h5 id="标识符提取"><a href="#标识符提取" class="headerlink" title="标识符提取"></a>标识符提取</h5><p>Banner提取是一种活动，用于确定正在运行远程计算机上的服务信息。系统是管理人员和黑客也渗透测试使用经常使用。恶意的黑客通过banner获取技术，识别目标主机的操作系统，进一步探测操作系统级别的漏洞从而可以从这一级别进行渗透测试。</p>
<p>操作系统和本系统应用一般是成套出现的，例如LAMP或者LNMP。操作系统的版本也有助于准确定位服务程序或者软件的版本，比如windows server 2003 搭载的IIS为6.0，windows server 2008 R2 搭载的是IIS7.5。</p>
<ul>
<li>工具</li>
</ul>
<p>CURL 工具banner获取</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">命令:</span><br><span class="line">• Curl --head <span class="number">192</span>.<span class="number">168</span>.<span class="number">1</span>.<span class="number">151</span></span><br><span class="line"></span><br><span class="line">内容:</span><br><span class="line">• Server:Apacne/<span class="number">2</span>.<span class="number">2</span>.<span class="number">15</span>(Centos)</span><br></pre></td></tr></table></figure>

<p>Netcat 工具banner获取</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">命令 :</span><br><span class="line">• Nc -vv <span class="number">192</span>.<span class="number">168</span>.<span class="number">1</span>.<span class="number">151</span> <span class="number">80</span></span><br><span class="line">• GET / HTTP/<span class="number">1</span>.<span class="number">0</span></span><br><span class="line">内容 :</span><br><span class="line">• Server:Apacne/<span class="number">2</span>.<span class="number">2</span>.<span class="number">15</span>(Centos)</span><br></pre></td></tr></table></figure>

<h5 id="操作系统识别"><a href="#操作系统识别" class="headerlink" title="操作系统识别"></a>操作系统识别</h5><p>许多漏洞是系统相关的，而且往往与相应的版本对应；从操作系统或者应用系统的具体实现中发掘出来的攻击手段都需要辨识系统；操作系统的信息还可以与其他信息结合起来，比如漏洞库，社工库</p>
<p>原理：操作系统扫描大部分都是基于TCP/IP协议栈的指纹检测技术的。</p>
<p>做法： 寻找不同操作系统之间在处理网络数据包上的差异，并且把足够多的差异组合起来，以便精确地识别出一个系统的OS版本。</p>
<p>不同操作系统类型和版本的差异性体现在：</p>
<ul>
<li>协议栈实现差异－协议栈指纹鉴别</li>
<li>开放端口的差异－端口扫描</li>
<li>应用服务的差异－标识符提取</li>
</ul>
<p>扫描分类：</p>
<ul>
<li>被动监听<ul>
<li>操作系统滑动窗口大小不一样<ul>
<li>产生上表中数据差别的主要原因在于RFC文档对于滑动窗口大小并没有明确的规定</li>
</ul>
</li>
<li>操作系统TTL值不统一<ul>
<li>TTL即使在同一系统下，也总是变化的，因为路由设备会修改它的值</li>
</ul>
</li>
</ul>
</li>
<li>主动探测<ul>
<li>根据端口扫描的结果判断<ul>
<li>Windows系统：137、139、445等端口；</li>
<li>Linux系统：512、513、514端口。</li>
</ul>
</li>
<li>根据Banner信息判断<ul>
<li>Server:Apacne/2.2.15(Centos)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="服务类型探测"><a href="#服务类型探测" class="headerlink" title="服务类型探测"></a>服务类型探测</h5><ul>
<li>网络服务类型探查<ul>
<li>确定目标网络中开放端口上绑定的网络应用服务类型和版本</li>
<li>了解目标系统更丰富信息, 可支持进一步的操作系统辨识和漏洞识别</li>
</ul>
</li>
<li>网络服务主动探测<ul>
<li>网络服务旗标抓取和探测: nmap -sV</li>
</ul>
</li>
</ul>
<h3 id="漏洞扫描-1"><a href="#漏洞扫描-1" class="headerlink" title="漏洞扫描"></a>漏洞扫描</h3><p>漏洞扫描是指基于漏洞数据库，通过扫描等手段对指定的远程或者本地计算机系统的安全脆弱性进行检测，发现可利用的漏洞的一种安全检测（渗透攻击）行为。</p>
<p>漏洞扫描技术是一类重要的网络安全技术。它和防火墙、入侵检测系统互相配合，能够有效提高网络的安全性。通过对网络的扫描，网络管理员能了解网络的安全设置和运行的应用服务，及时发现安全漏洞，客观评估网络风险等级。网络管理员能根据扫描的结果更正网络安全漏洞和系统中的错误设置，在黑客攻击前进行防范。如果说防火墙和网络监视系统是被动的防御手段，那么安全扫描就是一种主动的防范措施，能有效避免黑客攻击行为，做到防患于未然。</p>
<ul>
<li>可以发现：<ul>
<li>网络拓扑和操作系统脆弱点</li>
<li>开放的端口和运行的服务</li>
<li>应用程序和服务脆弱点</li>
<li>应用程序和服务器配置错误</li>
</ul>
</li>
</ul>
<h5 id="基本原理"><a href="#基本原理" class="headerlink" title="基本原理"></a>基本原理</h5><ol>
<li>漏洞库匹配法</li>
</ol>
<p>端口扫描，收集信息-&gt;漏洞库匹配-&gt;漏洞发现</p>
<p>基于网络的漏洞扫描，就是通过远程检测目标主机TCP／IP不同端口的服务，记录目标主机给予的回答。用这种方法来了解目标主机的各种信息，获得相关信息后，与网络漏洞扫描系统提供的漏洞库进行匹配，如果满足匹配条则视为漏洞存在。</p>
<p>如： CGI漏洞； FTP漏洞； SSH漏洞； HTTP漏洞等</p>
<ol start="2">
<li>模拟攻击法</li>
</ol>
<p>通过模拟黑客的进攻手法，对目标主机系统进行攻击性的安全漏洞扫描，如测试弱口令等，如果模拟攻击成功则视为漏洞存在。</p>
<p>如： 目录遍历漏洞探测； 跨站漏洞； FTP弱口令探测等</p>
<p>beef xss Blue_lotus XSS</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Ma9icCR</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://ma9iccr.github.io/2023-12/CISP-PTE%E5%9F%B9%E8%AE%AD%E7%AE%80%E8%AE%B0/">https://ma9iccr.github.io/2023-12/CISP-PTE%E5%9F%B9%E8%AE%AD%E7%AE%80%E8%AE%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://ma9iccr.github.io" target="_blank">Ma9icCR</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/CISP-PTE/">CISP-PTE</a><a class="post-meta__tags" href="/tags/web/">web</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023-12/CISP-PTE%E5%9F%B9%E8%AE%ADXSS%E5%B0%8F%E7%BB%83/"><img class="prev-cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">CISP-PTE培训XSS小练</div></div></a></div><div class="next-post pull-right"><a href="/2023-05/%E9%98%85%E8%AF%BB%E7%AE%80%E8%AE%B0/"><img class="next-cover" data-src="https://ma9ic-image.obs.cn-north-4.myhuaweicloud.com/images/read.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">阅读简记</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2023-12/CISP-PTE培训XSS小练/" title="CISP-PTE培训XSS小练"><img class="relatedPosts_cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-18</div><div class="relatedPosts_title">CISP-PTE培训XSS小练</div></div></a></div></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Ma9icCR</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script></body></html>